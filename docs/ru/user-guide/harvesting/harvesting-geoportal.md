# Сбор данных по протоколу GeoPortal REST {#geoportal_rest_harvester}

Этот сборщик данных подключится к удаленному серверу GeoPortal версии 9.3.x или 10.x и извлечет записи метаданных, 
которые соответствуют параметрам запроса, указанным с помощью GeoPortal REST API.

## Добавление сборщика данных GeoPortal REST
Нажмите `Собрать из` - `Geoportal REST`, чтобы создать сборщика метаданных по протоколу `Geoportal REST`. Доступные параметры следующие:

-   **Идентификация** - параметры собранных данных в каталоге GeoNetwork.
    -    *Имя* - Это краткое описание удаленного сайта. Оно будет показано на главной странице сбора в качестве имени для этого экземпляра CSW-харвестера.
    -    *Выбор логотипа* - Логотип будет использоваться при отображении собранных записей метаданных в результатах поиска.
    -    *Группа* - Группа, в которой разместятся собираемые метаданные.
    -    *Пользователь* - Пользователь, который будет владельцем собранных метаданных.
-   **Расписание** - Параметры расписания, согласно которым сборщик будет собирать метаданные.
    -    *Частота* - Частота (периодичность) запуска сбора метаданных харвестером.
    -    *Только один запуск* - Сборщик будет запущен только один раз, если выбран пункт.
-   **Настроить подключение** - параметры подключения к CSW-серверу.
    -    *URL сервиса* - URL CSW с параметрами GetCapabilities или без них. Например, <http://geonetwork-site.com/srv/eng/csw?service=CSW&request=GetCabilities&version=2.0.2>.
    -    *Удалённая аутентификация* - Учетные данные для базовой HTTP-аутентификации на сервере CSW (Логин и Пароль).
-   **Фильтр поиска** - Пользователь может запросить любое поле на сервере GeoPortal, используя синтаксис запроса Lucene, описанный на странице <http://webhelp.esri.com/geoportal_extension/9.3.1/index.htm#srch_lucene.htm>.
-   **Фильтрация и обработка ответа**
    -    *Проверка записей перед импортом* - Проверка записей перед импортом.
    -    *XSL-преобразование* - XSL-преобразование, которое будет применено к каждой записи перед добавлением в GeoNetwork.
-   **Доступность для собранных записей** - Назначение привилегий определённым группам по собранным метаданным.
    -    *Если запись существует* - Применяется только при обновлении, и если при конфликте UUID предписано задано перезаписывать записи. Если включено, привилегии не удаляются при обновлении.

!!! Примечания

    -   этот сборщик использует две службы REST из API GeoPortal:
        -   `rest/find/document` с параметром searchText для возврата списка RSS записей метаданных, соответствующих критериям поиска (максимум 100000)
        -   `rest/document` с параметром id из каждого результата, возвращенного в списке RSS
    -   этот сборщик был протестирован с GeoPortal 9.3.x и 10.x. Его можно использовать вместо сборщика CSW, если есть проблемы с обработкой стандартов OGC и т. д.
    -   обычно метаданные ISO19115, созданные программным обеспечением Geoportal, не будут иметь префикса 'gmd' для пространства имен `http://www.isotc211.org/2005/gmd`. 
        GeoNetwork XSLT поймет эти метаданные, но не сможет сопоставить заголовки и списки кодов в средстве просмотра/редакторе. 
        Чтобы устранить эту проблему, выберите `Добавить-gmd-префикс (Add-gmd-prefix)` и   `Применить этот XSLT к собранным записям` 
        в наборе параметров **Собранный контент**, описанном ранее.
