# Сбор данных по протоколу GeoPortal REST {#geoportal_rest_harvester}

Этот сборщик данных подключится к удаленному серверу GeoPortal версии 9.3.x или 10.x и извлечет записи метаданных, которые соответствуют параметрам запроса, указанным с помощью GeoPortal REST API.

## Добавление сборщика данных GeoPortal REST

На рисунке выше показаны доступные параметры:

- **Сайт** - Параметры удаленного сайта.
  - *Имя* - Это краткое описание удаленного сайта. Оно будет показано на главной странице сбора данных как имя для этого экземпляра сборщика данных GeoPortal REST.
  - *Базовый URL* - Базовый URL сервера GeoPortal, который будет собираться. Например, <http://yourhost.com/geoportal>. Сборщик данных добавит дополнительный путь, необходимый для доступа к службам REST на сервере GeoPortal.
  - *Значок (иконка)* - Значок для назначения собранным метаданным. Значок будет использоваться при отображении собранных записей метаданных в результатах поиска.
- **Критерии поиска** - С помощью кнопки `Добавить` можно добавить несколько критериев поиска. Вы можете запросить любое поле на сервере GeoPortal, используя синтаксис запроса Lucene, описанный на странице <http://webhelp.esri.com/geoportal_extension/9.3.1/index.htm#srch_lucene.htm>.
- **Параметры** - Параметры расписания (периодичности), согласно которым сборщик будет собирать метаданные.
- **Собранный контент** - Параметры, применяемые к собранному контенту.
  - *Применить XSLT к собранным записям* - применение XSLT-преобразования, который преобразует собранные записи в другой формат.
  - *Проверить* - Если отмечено, метаданные будут проверены после извлечения. Если проверка не пройдена, метаданные будут пропущены.
- **Привилегии** - Назначить привилегии собранным метаданным.
- **Категории**

!!! Примечания

    - этот сборщик использует две службы REST из API GeoPortal:
    - `rest/find/document` с параметром searchText для возврата списка RSS записей метаданных, соответствующих критериям поиска (максимум 100000)
    - `rest/document` с параметром id из каждого результата, возвращенного в списке RSS
    - этот сборщик был протестирован с GeoPortal 9.3.x и 10.x. Его можно использовать вместо сборщика CSW, если есть проблемы с обработкой стандартов OGC и т. д.
    - обычно метаданные ISO19115, созданные программным обеспечением Geoportal, не будут иметь префикса 'gmd' для пространства имен `http://www.isotc211.org/2005/gmd`. GeoNetwork XSLT поймет эти метаданные, но не сможет сопоставить заголовки и списки кодов в средстве просмотра/редакторе. Чтобы устранить эту проблему, выберите `Добавить-gmd-префикс (Add-gmd-prefix)` и   `Применить этот XSLT к собранным записям` в наборе параметров **Собранный контент**, описанном ранее.